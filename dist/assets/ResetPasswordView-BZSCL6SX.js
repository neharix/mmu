import{c as y,a as w,F as k,b as $}from"./index.esm-BvGA-hU4.js";import{q as S,j as T,y as F,r as h,s as N,m as j,a as D,g as p,h as l,u as i,e as t,t as a,w as f,F as V,x as B,c as g,n as d,i as C,_ as E}from"./index-DEayMjU6.js";import{S as O}from"./SiteTools-DgFONWff.js";import{T as U}from"./TooltipMessage-Ce-dr2Km.js";import{u as q}from"./ux.store-DPe2i-zf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useModalWindow-XA92Hi_B.js";const A={class:"w-full p-8 md:p-12 flex flex-col justify-center bg-white dark:bg-gray-800"},M={class:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-2"},P={class:"text-gray-600 dark:text-gray-400 mb-6"},R={class:"relative"},z={class:"text-red-500"},G={for:"username",class:"text-input-placeholder"},I={class:"text-center text-red-500"},H={class:"flex flex-wrap justify-center mt-8"},J=["disabled"],te={__name:"ResetPasswordView",setup(K){const b=S(),c=T(),m=q();F();const o=h(null),{theme:v}=N(m),x=y().shape({username:w().trim().required("validateError")});function _(e,{setErrors:n}){const{username:s}=e;return o.value=null,c.tryToGetOtpForUser(s).then(()=>{c.isOtpAvailable?B.push({name:"otp-confirmation"}):o.value="userNotFound"}).catch(r=>n({apiError:r}))}const u=h(null);return j(v,e=>{u.value=e==="dark"}),D(()=>{b.clearData();const e=localStorage.getItem("theme");u.value=e==="dark"}),(e,n)=>(g(),p(V,null,[l(O,{class:"absolute top-5 right-5 md:right-20 text-white","is-dark":u.value,onToggleTheme:n[0]||(n[0]=s=>i(m).toggleTheme()),notifications:!1,"without-tooltips":!0,"mobile-dropdown-classes":"top-8 right-0"},null,8,["is-dark"]),t("div",A,[t("h2",M,a(e.$t("reinstatePassword")),1),t("p",P,a(e.$t("enterUsername")),1),l(i($),{onSubmit:_,"validation-schema":i(x),class:"space-y-10"},{default:f(({errors:s,isSubmitting:r})=>[t("div",R,[l(i(k),{name:"username",type:"text",id:"username",class:d(["peer text-input",{"is-invalid":s.username}]),placeholder:e.$t("username")},null,8,["placeholder","class"]),l(U,{"position-classes":"-bottom-10","is-visible":!!s.username,"only-smooth-text":!0},{default:f(()=>[t("p",z,a(e.$t(s.username,{fieldName:e.$t("username")})),1)]),_:2},1032,["is-visible"]),t("label",G,a(e.$t("username")),1)]),o.value?(g(),p("div",{key:0,class:d({"-my-4":o.value})},[t("p",I,a(e.$t(o.value)),1)],2)):C("",!0),t("div",H,[t("button",{disabled:r,class:"flex justify-center w-50 py-2 px-2 border-none text-base rounded-xl bg-emerald-500 dark:bg-emerald-600 text-white shadow-emerald-500/30 ring-0 hover:ring-4 ring-emerald-400/10 transition-all duration-300 ease-in-out"},[l(E,{class:d({hidden:!r})},null,8,["class"]),t("span",{class:d(["select-none",{hidden:r}])},a(e.$t("getOtp")),3)],8,J)])]),_:1},8,["validation-schema"])])],64))}};export{te as default};
